---
title: 操作系统知识点
date: 2022-11-13 07:21:22
tags: [操作系统]
categories: [操作系统]
---
### 1. 代码段（text）、数据段、堆栈
1.1 过程
&emsp;&emsp;程序运行过程是先分配内存，然后从硬盘载入程序（只是载入部分，局部性原理）到内存中，这部分存储程序的内存称为代码段。cpu从代码段段中获取指令进行相关操作，<!--more-->指令执行过程需要使用到的内存称为堆、栈。堆由程序进行申请与释放，生命周期由程序管理；栈由编译器进行申请与释放，生命周期由编译器管理。数据段一般指全局变量与静态变量，数据段的数据数据生命周期直到程序结束。bss段记录全局变量，静态变量的信息，如变量名称、大小，在程序执行期间才进行初始化分配内存与赋值。
1.2 关于字面量与常量
```C
 int i = 5;//5时字面量，位于代码段
 char *p = "哈哈哈"//字符串字面量，位于只读数据段
 const int P = 5;//p是常量，5是字面量，编译器编译前进行替换处理
 int b = p;//编译把p前替换为5
 ```
 ![虚拟地址图](/img/段.png)
### 2.虚拟地址、mmu
 &emsp;&emsp;程序与操作系统共享虚拟地址，64位系统的虚拟地址为0-2<sup>64</sup>，操作系统一般占据高地址，程序占据低地址。程序内涉及的地址值是起始地址+偏移地址，起始地址随机值，即程序内的内存地址也是随机值，原因是为了程序安全。
 如图：
 ![虚拟地址图](/img/虚拟.png)
